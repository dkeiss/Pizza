-- User
CREATE TABLE USER
(
  ID                INTEGER      NOT NULL AUTO_INCREMENT,
  USER_NAME         VARCHAR(255) NOT NULL UNIQUE,
  PASSWORD          VARCHAR(255),
  PASSWORD_TYPE     VARCHAR(255),
  IS_ADMIN          BOOLEAN      NOT NULL,
  FIRST_NAME        VARCHAR(255),
  LAST_NAME         VARCHAR(255),
  DISCOUNT          DECIMAL(10, 2),
  CREATION_DATE     DATE,
  MODIFICATION_DATE DATE,
  PRIMARY KEY (ID)
);
CREATE SEQUENCE USER_ID_SEQ;

-- Product Catalog
CREATE TABLE PRODUCT_CATALOG
(
  ID            INTEGER      NOT NULL AUTO_INCREMENT,
  NAME          VARCHAR(255) NOT NULL,
  CREATION_DATE DATE,
  PRIMARY KEY (ID)
);
CREATE SEQUENCE PRODUCT_CATALOG_ID_SEQ;

-- Product Category
CREATE TABLE PRODUCT_CATEGORY
(
  ID                 INTEGER      NOT NULL AUTO_INCREMENT,
  NAME               VARCHAR(255) NOT NULL,
  PRODUCT_CATALOG_ID INTEGER      NOT NULL,
  CREATION_DATE      DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (PRODUCT_CATALOG_ID) REFERENCES PRODUCT_CATALOG (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE PRODUCT_CATEGORY_ID_SEQ;

-- Product Group
CREATE TABLE PRODUCT_GROUP
(
  ID                  INTEGER      NOT NULL AUTO_INCREMENT,
  NAME                VARCHAR(255) NOT NULL,
  PRODUCT_CATEGORY_ID INTEGER      NOT NULL,
  CREATION_DATE       DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (PRODUCT_CATEGORY_ID) REFERENCES PRODUCT_CATEGORY (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE PRODUCT_GROUP_ID_SEQ;

-- Product
CREATE TABLE PRODUCT
(
  ID               INTEGER      NOT NULL AUTO_INCREMENT,
  NUMBER           INTEGER,
  NAME             VARCHAR(255) NOT NULL,
  DESCRIPTION      CLOB,
  PRODUCT_GROUP_ID INTEGER      NOT NULL,
  CREATION_DATE    DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (PRODUCT_GROUP_ID) REFERENCES PRODUCT_GROUP (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE PRODUCT_ID_SEQ;

-- Product Variation
CREATE TABLE PRODUCT_VARIATION (
  ID            INTEGER      NOT NULL AUTO_INCREMENT,
  NAME          VARCHAR(255) NOT NULL,
  PRICE         DECIMAL      NOT NULL,
  CREATION_DATE DATE,
  PRIMARY KEY (ID)
);
CREATE SEQUENCE PRODUCT_VARIATION_ID_SEQ;

-- Product Variations
CREATE TABLE PRODUCT_VARIATIONS (
  ID                   INTEGER NOT NULL AUTO_INCREMENT,
  PRODUCT_ID           INTEGER NOT NULL,
  PRODUCT_VARIATION_ID INTEGER NOT NULL,
  CREATION_DATE        DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT (ID) ON UPDATE CASCADE,
  FOREIGN KEY (PRODUCT_VARIATION_ID) REFERENCES PRODUCT_VARIATION (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE PRODUCT_VARIATIONS_ID_SEQ;

-- Additional category
CREATE TABLE ADDITIONAL_CATEGORY
(
  ID            INTEGER      NOT NULL AUTO_INCREMENT,
  NAME          VARCHAR(255) NOT NULL,
  DUTY          BOOLEAN      NOT NULL,
  CREATION_DATE DATE,
  PRIMARY KEY (ID)
);
CREATE SEQUENCE ADDITIONAL_CATEGORY_ID_SEQ;

-- Additional categories
CREATE TABLE ADDITIONAL_CATEGORIES
(
  ID                     INTEGER NOT NULL AUTO_INCREMENT,
  PRODUCT_ID             INTEGER NOT NULL,
  ADDITIONAL_CATEGORY_ID INTEGER NOT NULL,
  CREATION_DATE          DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT (ID) ON UPDATE CASCADE,
  FOREIGN KEY (ADDITIONAL_CATEGORY_ID) REFERENCES ADDITIONAL_CATEGORY (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE ADDITIONAL_CATEGORIES_ID_SEQ;

-- Additional
CREATE TABLE ADDITIONAL
(
  ID                     INTEGER NOT NULL AUTO_INCREMENT,
  DESCRIPTION            CLOB    NOT NULL,
  ADDITIONAL_CATEGORY_ID INTEGER NOT NULL,
  CREATION_DATE          DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (ADDITIONAL_CATEGORY_ID) REFERENCES ADDITIONAL_CATEGORY (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE ADDITIONAL_ID_SEQ;

-- Additional Price
CREATE TABLE ADDITIONAL_PRICE
(
  ID            INTEGER      NOT NULL AUTO_INCREMENT,
  NAME          VARCHAR(255) NOT NULL,
  ADDITIONAL_ID INTEGER      NOT NULL,
  CREATION_DATE DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (ADDITIONAL_ID) REFERENCES ADDITIONAL (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE ADDITIONAL_PRICE_ID_SEQ;

-- Bulk Order
CREATE TABLE BULK_ORDER
(
  ID                INTEGER      NOT NULL AUTO_INCREMENT,
  CATALOG_ID        INTEGER      NOT NULL,
  NAME              VARCHAR(255) NOT NULL,
  ACTIVE_UNTIL      DATE         NOT NULL,
  CREATION_DATE     DATE,
  MODIFICATION_DATE DATE,
  PRIMARY KEY (ID)
);
CREATE SEQUENCE BULK_ORDER_ID_SEQ;

-- Order
CREATE TABLE ORDER_USER
(
  ID                   INTEGER NOT NULL AUTO_INCREMENT,
  AMOUNT               DECIMAL NOT NULL,
  BULK_ORDER_ID        INTEGER NOT NULL,
  PRODUCT_ID           INTEGER NOT NULL,
  PRODUCT_VARIATION_ID INTEGER NOT NULL,
  CREATION_DATE        DATE,
  MODIFICATION_DATE    DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (BULK_ORDER_ID) REFERENCES BULK_ORDER (ID) ON UPDATE CASCADE,
  FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT (ID) ON UPDATE CASCADE,
  FOREIGN KEY (PRODUCT_VARIATION_ID) REFERENCES PRODUCT_VARIATION (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE ORDER_ID_SEQ;

-- Order Additions
CREATE TABLE ORDER_USER_ADDITIONS
(
  ID                  INTEGER NOT NULL AUTO_INCREMENT,
  ORDER_USER_ID       INTEGER NOT NULL,
  ADDITIONAL_ID       INTEGER NOT NULL,
  ADDITIONAL_PRICE_ID INTEGER NOT NULL,
  CREATION_DATE       DATE,
  MODIFICATION_DATE   DATE,
  PRIMARY KEY (ID),
  FOREIGN KEY (ORDER_USER_ID) REFERENCES ORDER_USER (ID) ON UPDATE CASCADE,
  FOREIGN KEY (ADDITIONAL_ID) REFERENCES ADDITIONAL (ID) ON UPDATE CASCADE,
  FOREIGN KEY (ADDITIONAL_PRICE_ID) REFERENCES ADDITIONAL_PRICE (ID) ON UPDATE CASCADE
);
CREATE SEQUENCE ORDER_ADDITIONS_ID_SEQ;
